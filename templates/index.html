<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Quant Strategy Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <style>
        :root { --primary: #3498db; }
        .grid-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .stat-card { padding: 1rem; background: #1a212c; border-radius: 8px; text-align: center; border: 1px solid #2d3748; }
        .score-bar { width: 100%; background: #2d3748; border-radius: 10px; height: 12px; margin: 15px 0; }
        .score-fill { height: 100%; border-radius: 10px; transition: width 1s ease-in-out; }
    </style>
</head>
<body class="container" style="padding: 40px 0;">
    <h1 style="text-align: center;">ğŸ’° í€€íŠ¸ ì „ë¬¸ê°€ì˜ ì¡±ì§‘ê²Œ ë¶„ì„</h1>
    
    <form method="post" action="/analyze">
        <div style="display: flex; gap: 10px;">
            <input type="text" name="ticker" placeholder="ë¯¸êµ­ ì£¼ì‹ í‹°ì»¤ ì…ë ¥ (ì˜ˆ: NVDA)" required>
            <button type="submit" class="contrast">ë¶„ì„ ì‹¤í–‰</button>
        </div>
    </form>

    {% if result %}
    <article>
        <header>
            <h2 style="margin: 0;">{{ ticker }} <small>ë¶„ì„ ê²°ê³¼</small></h2>
        </header>

        <div class="grid-stats">
            <div class="stat-card">
                <small>í˜„ì¬ê°€</small>
                <h3>${{ result.price }}</h3>
                <span style="color: {{ 'red' if result.change < 0 else '#2ecc71' }}">{{ result.change }}%</span>
            </div>
            <div class="stat-card">
                <small>RSI (14ì¼)</small>
                <h3>{{ result.rsi }}</h3>
                <small>
                    {{ 'ê³¼ë§¤ìˆ˜' if result.rsi != 'N/A' and result.rsi > 70
                       else 'ê³¼ë§¤ë„' if result.rsi != 'N/A' and result.rsi < 30
                       else 'ë³´í†µ' }}
                </small>
            </div>
            <div class="stat-card">
                <small>ì‹œê°€ì´ì•¡</small>
                <h3>${{ result.mcap }}</h3>
            </div>
            <div class="stat-card">
                <small>PER</small>
                <h3>{{ result.pe }}</h3>
            </div>
        </div>

        <div style="margin-top: 2rem; text-align: center;">
            <label>ì¢…í•© íˆ¬ì ë§¤ë ¥ë„: <strong>{{ result.score }}ì </strong></label>
            <div class="score-bar">
                <div class="score-fill" style="width: {{ result.score }}%; background: {{ result.color }};"></div>
            </div>
            <h1 style="color: {{ result.color }};">{{ result.status }}</h1>
            <p><em>"{{ result.msg if result.msg else 'í˜„ ì‹œì  í€€íŠ¸ ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¥¸ ë¶„ì„ ê²°ê³¼ì…ë‹ˆë‹¤.' }}"</em></p>
        </div>

        <footer>
            <strong>ê¸°ì—… ìš”ì•½:</strong><br>
            <small style="white-space: pre-wrap;">{{ result.summary }}</small>
        </footer>
    </article>
    {% endif %}
</body>
</html>
